<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BiasLens - Filter News by Bias</title>
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
  <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background: #f4f4f4;
    }
    header {
      background-color: #fff;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo-container {
      display: flex;
      align-items: center;
    }
    .logo-container img {
      height: 80px; /* Adjust the logo size */
    }
    .logo-text {
      font-size: 24px;
      margin-left: 10px;
      font-family: 'Bodoni MT Black', sans-serif; /* You can choose a more appropriate font */
    }
    .search-and-filter {
      display: flex;
      align-items: center;
    }
    input[type="search"] {
      padding: 5px;
      margin-right: 10px;
    }
    .filter-button select {
      padding: 5px;
      margin-right: 10px;
    }
    button.sign-in {
      background-color: #0056b3;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
    }

    /* Styles for navigation links as buttons */
    nav ul {
      display: flex;
      justify-content: center;
      list-style: none;
      padding: 0;
    }
    nav ul li {
      margin: 0 10px;
    }
    nav ul li a {
      text-decoration: none;
      color: #333;
      background-color: #e7e7e7;
      padding: 10px 15px;
      border-radius: 5px;
      display: block;
    }
    nav ul li a:hover {
      background-color: #d4d4d4;
    }

    /* Styles for the articles */
    .news-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      margin: 20px;
    }
#articles-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); /* Adjust minmax for desired column width */
  gap: 20px; /* Space between grid items */
  padding: 20px;
}

.article {
  border: 1px solid #ddd;
  padding: 10px;
  display: flex;
  flex-direction: column;
}

.article img {
  width: 100%; /* Make images fully responsive within their containers */
  height: auto;
  margin-bottom: 10px;
}

.article h2 {
  font-size: 20px;
  margin: 10px 0;
}

.article p, .article a {
  font-size: 16px;
  margin-bottom: 5px;
}


  </style>
</head>
<body>

<header>
  <div class="logo-container">
    <img src="https://media.istockphoto.com/id/1333547631/vector/round-logo-lens-sign-vector-sketch-lens-tattoo.jpg?s=612x612&w=0&k=20&c=ezgCYSBiZ5pOh-0vLBK1tsu7aLxuHb3tH97uDmUXS5Q=" alt="BiasLens Logo">
    <span class="logo-text">BiasLens</span>
  </div>
  <div class="search-and-filter">
    <input type="search" placeholder="Search">
    <div class="filter-button">
      <select name="biasScore" id="biasScore">
        <option value="all">All</option>
        <option value="balanced">Balanced</option>
        <option value="left">Left-Biased</option>
        <option value="right">Right-Biased</option>
      </select>
    </div>
    <button class="sign-in">Sign in</button>
  </div>
</header>

<nav>
  <ul>
    <li><a href="#latest">Latest</a></li>
    <li><a href="#world">World</a></li>
    <li><a href="#sports">Sports</a></li>
    <li><a href="#culture">Culture</a></li>
    <li><a href="#wellness">Wellness</a></li>
    <li><a href="#economy">Economy</a></li>
  </ul>
</nav>

<main>
  <div class="news-grid" id="articles-container">
    <!-- Articles will be populated by JavaScript -->
  </div>
</main>

<footer>
  <p>Contact us at <a href="mailto:info@biaslens.com">info@biaslens.com</a></p>
  <p>Â© 2024 BiasLens. All rights reserved.</p>
</footer>

<script>
// Sample articles data (here we will put our news articles)
const articlesData = [
//   {
//     title: "Education Reform Initiatives Aim to Address Inequality in Schools",
//     image: "pic2.jpg",
//     bias: "Balanced",
//     description: "An in-depth look into new education reforms targeting inequality."
//   },
//   {
//     title: "Global Climate Agreement Reached in Historic Summit",
//     image: "pic3.jpg",
//     bias: "Left-Biased",
//     description: "World leaders come together to commit to ambitious climate goals."
//   },
//   {
//     title: "Breakthrough in Medical Research: Promising Treatment for Rare Disease",
//     image: "pic4.jpg",
//     bias: "Right-Biased",
//     description: "A new treatment offers hope for patients suffering from a rare genetic condition."
//   }
]; 

// Function to populate articles on the page
// function populateArticles(articles) {
//   const container = document.getElementById('news-articles');
//   container.innerHTML = ''; // Clear existing articles

//   articles.forEach(article => {
//     const articleElement = document.createElement('article');
//     articleElement.innerHTML = `
//       <img src="${article.image}" alt="Article Image">
//       <h2>${article.title}</h2>
//       <p>${article.description}</p>
//       <p><strong>Bias:</strong> ${article.bias}</p>
//     `;
//     container.appendChild(articleElement);
//   });
// }

// Initially populate articles
// populateArticles(articlesData);

// Filtering functionality
// document.getElementById('biasScore').addEventListener('change', function() {
//   const bias = this.value;
//   const filteredArticles = articlesData.filter(article => bias === 'all' || article.bias === bias);
//   populateArticles(filteredArticles);
// });

// fetch("https://newsapi.org/v2/top-headlines?country=us&apiKey=a43991c2be4041f2bdde1b57f815f394")
//   .then((response) => response.json())
//   .then(data => {
//     data.forEach(article => {
//       console.log(article.title); 
//     });
//   })

 // .then((json) => console.log(json));
// let data = [];
//  fetch('https://newsapi.org/v2/top-headlines?country=us&apiKey=a43991c2be4041f2bdde1b57f815f394')
//   .then(response => {
//     if (!response.ok) {
//       throw new Error('Network response was not ok');
//     }
//     return response.json(); // Parses the JSON response body
//   })
//   .then(data => {
//     data.articles.forEach(article => {
//       console.log(article.title); 
//     });
//   })
//   .catch(error => {
//     console.error('There has been a problem with your fetch operation:', error);
//   });


//TODO: ADD seperate pages for each article
fetch('http://127.0.0.1:5000/get_news')
  .then(response => 
  {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    if(data.status === "ok") {
      const articlesContainer = document.getElementById('articles-container');
      data.articles.forEach(article => {
        const articleBlock = document.createElement('div');
        articleBlock.classList.add('article');

        // Use a placeholder image if `urlToImage` is null or empty
        const imageUrl = article.urlToImage || 'placeholder.webp'; // Provide a path to a default image

        // Omit the author paragraph if the author's name is not available
        const authorInfo = article.author ? `<p>By ${article.author} at ${article.source.name}</p>` : `<p>Source: ${article.source.name}</p>`;

        articleBlock.innerHTML = `
          <h2>${article.title}</h2>
          ${authorInfo}
          <img src="${imageUrl}" alt="${article.title}">
          <h3>Bias: ${article.bias}</h3>
          <p>${article.content}</p>
          <a href="${article.url}" target="_blank">Read more</a>
        `;

        articlesContainer.appendChild(articleBlock);
      });
    } else {
      console.error('Response status is not ok');
    }
  })
  .catch(error => {
    console.error('There has been a problem with your fetch operation:', error);
  });

</script>

</body>
</html>
